<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />

    <!-- Add your CSS styles here -->
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      #activityViewTitle {
        font-family: 'Inter', sans-serif;
        font-size: 30px;
        position: fixed;
        top: 10px;
        left: 10px;
        z-index: 9999;
      }
    </style>

    <!-- Your existing CSS links -->
    <link
      rel="stylesheet"
      href="Assets/typein-whole-common.css"
      type="text/css"
    />
    <!-- <link rel="stylesheet" href="https://cdn.ctat.cs.cmu.edu/releases/current/CTAT.css" type="text/css"> -->

    <!-- Your existing script tags -->
    <script src="Assets/transaction_mailer_users.js"></script>
    <script src="https://cdn.ctat.cs.cmu.edu/releases/lab/guppy/guppy_plus_osk.min.js"></script>
    <script src="https://cdn.ctat.cs.cmu.edu/releases/lab/jquery.min.js"></script>
    <script src="https://cdn.ctat.cs.cmu.edu/releases/lab/ctat.min.js"></script>
    <script src="https://cdn.ctat.cs.cmu.edu/releases/lab/ctatloader.js"></script>
    <script src="https://cdn.ctat.cs.cmu.edu/releases/lab/nools.js"></script>
    <script src="Assets/math.js"></script>
    <script src="Assets/modelhelperfuns.js"></script>
    <script src="Assets/typein-common.js"></script>
    <script>
      window.interfaceType = 'typein';
    </script>
  </head>
  <body onclick="hideHintPanel(event)">
    <div id="container">
      <div id="topPanel">
        <div class="CTATSkillWindow"></div>
      </div>
    </div>

    <!-- Add the title element -->
    <div id="activityViewTitle">Activity View</div>

    <script>
      var characterLimit = 10;

      var slideOutHintContainer = document.getElementById(
        'slideOutHintContainer'
      );
      var isHintPanelVisible = false;

      function showHintPanel(event) {
        event.stopPropagation();
        var mathInput = document.querySelector('.CTATMathInput');
        mathInput.setAttribute('data-ctat-charlimit', characterLimit);

        slideOutHintContainer.style.display = 'block';
        slideOutHintContainer.classList.add('show');
        isHintPanelVisible = true;

        var nextButton = document.getElementById('CTATHintWindow--next');
        nextButton.click();
      }

      function hideHintPanel(event) {
        var target = event.target;
        var isHintContainerClicked =
          target.classList.contains('HintContainer') ||
          target.closest('.HintContainer') !== null;

        if (isHintPanelVisible && !isHintContainerClicked) {
          slideOutHintContainer.style.display = 'none';
          slideOutHintContainer.classList.remove('show');
          isHintPanelVisible = false;
        }
      }

      var mathInput = document.querySelector('.CTATMathInput');
      mathInput.addEventListener('input', function () {
        if (mathInput.textContent.length > characterLimit) {
          mathInput.textContent = mathInput.textContent.slice(
            0,
            characterLimit
          );
        }
      });

      mathInput.addEventListener('keydown', function (event) {
        if (
          mathInput.textContent.length >= characterLimit &&
          event.key !== 'Backspace'
        ) {
          event.preventDefault();
        }
      });
    </script>
  </body>
</html>
